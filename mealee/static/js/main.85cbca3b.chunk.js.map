{"version":3,"sources":["model/Recipe.tsx","components/RecipeSelector.tsx","RecipeDB.tsx","components/LoadFileDialog.tsx","filters/RandomFilter.tsx","filters/MinIngredientsFilter.tsx","filters/MaxReuseFilter.tsx","filters/Filter.tsx","model/PlanSettings.tsx","components/PlanSettings.tsx","components/PlanVisualizer.tsx","components/RecipeEditor.tsx","model/Plan.tsx","Planner.tsx","App.tsx","index.js"],"names":["Ingredient","name","amount","unit","this","o","Error","undefined","Recipe","id","title","summary","source","sourceUrl","readyInMinutes","ingredients","map","i","toJSON","replace","c","r","Math","random","toString","Array","isArray","fromJSON","RecipeSelector","recipeIndex","selectedRecipes","maxNrSelected","onUpdate","onEdit","React","useState","filter","setFilter","currentRecipeid","setCurrentRecipeId","filteredRecipes","trim","length","all","search","res","key","selectedRecipeMap","Map","getId","renderRecipe","recipe","getSummary","getIngredients","getName","sort","n","Col","sm","className","Popover","Title","as","getTitle","Content","Container","Row","Image","src","getReadyInMinutes","getSource","listItems","OverlayTrigger","placement","overlay","onEnter","onExit","ListGroup","Item","Form","Check","type","label","disabled","has","size","checked","onChange","delete","set","from","values","Button","variant","onClick","e","editButton","onSubmit","preventDefault","InputGroup","Prepend","Text","FormControl","placeholder","event","currentTarget","value","Group","controlId","RecipeIndex","recipesMap","index","fieldAccessors","join","fieldBoostFactors","termFilter","term","toLowerCase","add","docs","addDocumentToIndex","words","q","query","reduce","acc","get","push","score","removeDocumentFromIndex","Set","getAll","keys","createIndex","LoadFileDialog","loadButtonTitle","onClose","onLoad","file","setFile","Modal","show","onHide","Header","closeButton","Body","target","files","Footer","MinIngredientsFilter","explicitRecipes","remainingRecipes","ingredientsAlreadyUsed","concat","flatMap","scoredRecipes","ingredientsAlreadyUSed","sum","a","b","result","scoredRecipe","MaxReuseFilter","randomFilter","max","floor","Optimization","filters","filterMap","f","createFilters","PlanSettingsPanel","props","collapsed","setCollapsed","filterList","Accordion","defaultActiveKey","Card","Toggle","eventKey","Collapse","Label","Control","planSettings","nrRecipes","newNrRecipes","newSettings","clone","changeNrRecipes","parseInt","optimization","filterId","changeOptimization","PlanSettings","Object","create","PlanVisualizer","plan","allRecipes","calculatedRecipes","explicitRecipeHeaderList","calculatedRecipeHeaderList","ingredientMap","idx","forEach","oneIngredientRecord","getAmount","getUnit","ingredientLineList","perRecipe","x","entry","Table","striped","bordered","RecipeEditor","recipeJSON","setRecipeJSON","isTitleInvalid","setIsTitleInvalid","isIngredientsInvalid","setIsIngredientsInvalid","ingredientCSV","setIngredientCSV","deleteRecipe","onDelete","isInvalid","newVal","Feedback","rows","Number","isNaN","lines","split","invalid","line","parts","s","onSave","Plan","optimizePlan","previousPlan","settings","nrRecipesToCalculate","allRecipeIds","freeRecipeIds","calcultedRecipes","freeRecipes","currentRecipes","finalRecipe","newPlan","Menu","onLoadFile","onNewRecipe","recipeFileUrl","Navbar","bg","Brand","href","aria-controls","Nav","NavDropdown","download","App","addRecipes","newRecipes","setState","st","saveRecipe","closeRecipeEditor","onFileLoaded","ev","data","json","JSON","parse","version","recipes","deserializeRecipes","error","message","closeLoadFileDialog","loadFile","reader","FileReader","onload","readAsText","generateRecipeFileURL","Blob","state","stringify","window","URL","createObjectURL","showLoadFileDialog","showRecipeEditor","recipeToEdit","dismissError","updatePlanSettings","ps","updateExplicitRecipes","newExplicitRecipes","editRecipe","fluid","Alert","dismissible","xs","Component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"qSAqBaA,EAAb,WAEI,WAAoBC,EAAcC,EAAgBC,GACjD,yBAkDOF,UAlDR,OAmDQC,YAnDR,OAoDQC,UApDR,EACIC,KAAKH,KAAOA,EACZG,KAAKF,OAASA,EACdE,KAAKD,KAAOA,EANpB,sDAWQ,OAAOC,KAAKH,OAXpB,kCAgBQ,OAAOG,KAAKF,SAhBpB,gCAqBQ,OAAOE,KAAKD,OArBpB,+BA8CQ,MAAO,CACHF,KAAMG,KAAKH,KACXC,OAAQE,KAAKF,OACbC,KAAMC,KAAKD,SAjDvB,gCAwB2BE,GAEnB,IAAIA,EAAEJ,KAEF,MAAM,IAAIK,MAAM,2BAGpB,IAAID,EAAEF,KAEF,MAAM,IAAIG,MAAM,2BAGpB,QAAgBC,IAAbF,EAAEH,OAED,MAAM,IAAII,MAAM,6BAGpB,OAAO,IAAIN,EAAWK,EAAEJ,KAAMI,EAAEH,OAAQG,EAAEF,UAzClD,KAiEO,IAAMK,EAAb,WAEI,WAAoBC,EAAYC,GAC/B,yBAiFOD,QAjFR,OAkFQC,WAlFR,OAmFQC,aAnFR,OAoFQC,YApFR,OAqFQC,eArFR,OAsFQC,oBAtFR,OAuFQC,iBAvFR,EACIX,KAAKK,GAAKA,EACVL,KAAKM,MAAQA,EACbN,KAAKW,YAAc,GAN3B,oDAWQ,OAAOX,KAAKK,KAXpB,iCAgBQ,OAAOL,KAAKM,QAhBpB,mCAqBQ,OAAON,KAAKO,UArBpB,kCA0BQ,OAAOP,KAAKQ,SA1BpB,qCA+BQ,OAAOR,KAAKS,YA/BpB,0CAoCQ,OAAOT,KAAKU,iBApCpB,uCAyCQ,OAAOV,KAAKW,cAzCpB,+BAyEQ,MAAO,CACHN,GAAIL,KAAKK,GACTC,MAAON,KAAKM,MACZC,QAASP,KAAKO,QACdC,OAAQR,KAAKQ,OACbC,UAAWT,KAAKS,UAChBC,eAAgBV,KAAKU,eACrBC,YAAaX,KAAKW,YAAYC,KAAI,SAAAC,GAAC,OAAEA,EAAEC,gBAhFnD,gCA4C2Bb,GAOnB,GALIA,EAAEI,KAEFJ,EAAEI,GAtDH,uCAAuCU,QAAQ,SAAS,SAASC,GACtE,IAAIC,EAAoB,GAAhBC,KAAKC,SAAgB,EAC7B,OAD0C,MAANH,EAAYC,EAAU,EAAJA,EAAW,GACxDG,SAAS,SAuDZnB,EAAEK,MAEF,MAAM,IAAIJ,MAAM,wBAGpB,IAAIe,EAAI,IAAIb,EAAOH,EAAEI,GAAIJ,EAAEK,OAY3B,OAVAW,EAAEV,QAAUN,EAAEM,QACdU,EAAET,OAASP,EAAEO,OACbS,EAAER,UAAYR,EAAEQ,UAChBQ,EAAEP,eAAiBT,EAAES,eAElBW,MAAMC,QAAQrB,EAAEU,eAEfM,EAAEN,YAAcV,EAAEU,YAAYC,KAAI,SAAAC,GAAC,OAAIjB,EAAW2B,SAASV,OAGxDI,MApEf,K,8ECrEaO,EAAyD,SAAC,GAAqE,IAApEC,EAAmE,EAAnEA,YAAaC,EAAsD,EAAtDA,gBAAiBC,EAAqC,EAArCA,cAAeC,EAAsB,EAAtBA,SAAUC,EAAY,EAAZA,OAAY,EAE3GC,IAAMC,SAAS,IAF4F,mBAEhIC,EAFgI,KAExHC,EAFwH,OAGzFH,IAAMC,SAAwB,MAH2D,mBAGhIG,EAHgI,KAG/GC,EAH+G,KASjIC,EAA4C,IAAzBJ,EAAOK,OAAOC,OACnCb,EAAYc,MAAQd,EAAYe,OAAOR,GAAQpB,KAAI,SAAA6B,GAAG,OAAEA,EAAIC,OAE1DC,EAAoB,IAAIC,IAAIlB,EAAgBd,KAAI,SAAAK,GAAC,MAAI,CAACA,EAAE4B,QAAS5B,OAejE6B,EAAe,SAACC,GAElB,IAAMxC,EAAUwC,EAAOC,aAAeD,EAAOC,aAAe,2BACtDrC,EAAcoC,EAAOE,iBAAiBrC,KAAI,SAAAK,GAAC,OAAGA,EAAEiC,aACfC,OACAvC,KAAI,SAAAwC,GAAC,OAAI,kBAACC,EAAA,EAAD,CAAKC,GAAG,OAAOC,UAAU,8BAA8BH,MAEvG,OACI,kBAACI,EAAA,EAAD,CAASnD,GAAG,iBACR,kBAACmD,EAAA,EAAQC,MAAT,CAAeC,GAAG,MAAMX,EAAOY,YAC/B,kBAACH,EAAA,EAAQI,QAAT,KACA,kBAACC,EAAA,EAAD,CAAWN,UAAU,aACrB,kBAACO,EAAA,EAAD,CAAKP,UAAU,QACX,kBAACF,EAAA,EAAD,KAAM9C,IAEV,kBAACuD,EAAA,EAAD,CAAKP,UAAU,QACX,kBAACF,EAAA,EAAD,CAAKC,GAAG,QAAO,kBAACS,EAAA,EAAD,CAAOC,IAAI,oBAC1B,kBAACX,EAAA,EAAD,CAAKC,GAAG,QAAQP,EAAOkB,oBAA2BlB,EAAOkB,oBAAsB,UAAY,WAC3F,kBAACZ,EAAA,EAAD,CAAKC,GAAG,QAAO,kBAACS,EAAA,EAAD,CAAOC,IAAI,sBAC1B,kBAACX,EAAA,EAAD,CAAKC,GAAG,QAAQP,EAAOmB,YAAcnB,EAAOmB,YAAc,MAE9D,kBAACJ,EAAA,EAAD,KACSnD,OAkBfwD,EAAY/B,EACbxB,KAAI,SAACmC,GAAD,OACG,kBAACqB,EAAA,EAAD,CAAgBC,UAAU,QAAQC,QAASxB,EAAaC,GACpCwB,QAAS,kBAAIpC,EAAmBY,EAAOF,UACvC2B,OAAQ,kBAAIrC,EAAmB,QAC/C,kBAACsC,EAAA,EAAUC,KAAX,CAAgBhC,IAAKK,EAAOF,SACxB,kBAAC8B,EAAA,EAAKC,MAAN,CAAYC,KAAK,WACLxE,GAAI0C,EAAOF,QACXiC,MAAO/B,EAAOY,WACdoB,UAAWpC,EAAkBqC,IAAIjC,EAAOF,UAAYF,EAAkBsC,MAAQtD,EAC9EuD,QAASvC,EAAkBqC,IAAIjC,EAAOF,SACtCsC,SAAU,kBAhEjBlE,EAgEuC8B,EA/DzDJ,EAAkBqC,IAAI/D,EAAE4B,SAEvBF,EAAkByC,OAAOnE,EAAE4B,SAI3BF,EAAkB0C,IAAIpE,EAAE4B,QAAS5B,QAGrCW,EAASP,MAAMiE,KAAK3C,EAAkB4C,WAVlB,IAACtE,KA0CN,SAAC8B,GAChB,OAAGb,IAAkBa,EAAOF,QAEjB,kBAAC2C,EAAA,EAAD,CAAQC,QAAQ,kBAAkBR,KAAK,KAAK1B,UAAU,OAAOmC,QAAS,SAAAC,GAAC,OAAE9D,EAAOkB,KAAhF,QAIA,GAgBM6C,CAAW7C,QAKhC,OACI,kBAAC4B,EAAA,EAAD,CAAMpB,UAAU,OAAOsC,SAAU,SAACF,GAAD,OAAKA,EAAEG,mBACxC,kBAACC,EAAA,EAAD,CAAYxC,UAAU,QACtB,kBAACwC,EAAA,EAAWC,QAAZ,KACA,kBAACD,EAAA,EAAWE,KAAZ,CAAiB5F,GAAG,gBAApB,MAEA,kBAAC6F,EAAA,EAAD,CAAarB,KAAK,OAAOsB,YAAY,iBAAiBhB,SArF1C,SAACiB,GACbnE,EAAUmE,EAAMC,cAAcC,WAsF9B,kBAAC3B,EAAA,EAAK4B,MAAN,CAAYC,UAAU,eAClB,kBAAC/B,EAAA,EAAD,KAAYN,M,wBCxGXsC,EAaT,aAAe,IAAD,gCAXNC,gBAWM,OAVNC,WAUM,OARNC,eAAiB,CACrB,SAAC3F,GAAD,OAAeA,EAAE0C,YACjB,SAAC1C,GAAD,uBAAeA,EAAE+B,oBAAjB,QAAiC,IACjC,SAAC/B,GAAD,OAAeA,EAAEgC,iBAAiBrC,KAAI,SAAAC,GAAC,OAAIA,EAAEqC,aAAW2D,KAAK,OAKnD,KAFNC,kBAAoB,CAAC,EAAG,GAAK,GAEvB,KAKNC,WAAa,SAACC,GAClB,OAAOA,EAAKC,eANF,KAUPC,IAAM,SAACjG,GACV,IAAIyB,EAAMzB,EAAE4B,QA2BZ,OAzBA,EAAKuC,OAAO1C,GACZ,EAAKgE,WAAWrB,IAAI3C,EAAKzB,GAGrB,EAAK0F,MAAMQ,KAAKnC,IAAItC,IAEpB0E,YACI,EAAKT,MACL,EAAKC,eAKLS,QAGA,EAAKN,WAGLrE,EAEAzB,IAID,GAtCG,KA0CPuB,OAAS,SAAC8E,GAAD,OAAeC,YACzB,EAAKZ,MACL,EAAKG,kBAEL,IACA,IACAO,QACA,EAAKN,gBAGL5G,EACAmH,GACAE,QAAO,SAACC,EAA2BhF,GACjC,IAAIxB,EAAI,EAAKyF,WAAWgB,IAAIjF,EAAIC,KAKhC,OAJGzB,GAECwG,EAAIE,KAAK,CAACjF,IAAKzB,EAAG2G,MAAOnF,EAAImF,QAE1BH,IACR,KA7DO,KA+DPlF,IAAM,WACT,OAAOlB,MAAMiE,KAAK,EAAKoB,WAAWnB,WAhExB,KAmEPmC,IAAM,SAAChF,GACV,OAAO,EAAKgE,WAAWgB,IAAIhF,IApEjB,KAuEP0C,OAAS,SAAC1C,GACbmF,YACI,EAAKlB,MACL,IAAImB,IACJpF,GACJ,EAAKgE,WAAWtB,OAAO1C,IA5Eb,KA+EPqF,OAAS,SAACC,GACb,OAAOA,EAAKR,QAAO,SAACC,EAAc/E,GAC9B,IAAIzB,EAAI,EAAKyF,WAAWgB,IAAIhF,GAK5B,OAJGzB,GAECwG,EAAIE,KAAK1G,GAENwG,IACR,KAtFHzH,KAAK2G,MAAQsB,YAAoB,GACjCjI,KAAK0G,WAAa,IAAI9D,K,QCNjBsF,EAAyD,SAAC,GAA+C,IAA9C5H,EAA6C,EAA7CA,MAAO6H,EAAsC,EAAtCA,gBAAiBC,EAAqB,EAArBA,QAASC,EAAY,EAAZA,OAAY,EAEzFvG,IAAMC,SAAsB,MAF6D,mBAE1GuG,EAF0G,KAEpGC,EAFoG,KAIjH,OACI,kBAACC,EAAA,EAAD,CAAOC,MAAM,EAAMC,OAAQN,GAC3B,kBAACI,EAAA,EAAMG,OAAP,CAAcC,aAAW,GACzB,kBAACJ,EAAA,EAAM/E,MAAP,KAAcnD,IAEd,kBAACkI,EAAA,EAAMK,KAAP,KACA,kBAAClE,EAAA,EAAD,KACA,kBAACuB,EAAA,EAAD,CAAarB,KAAK,OAAOM,SAAU,SAACQ,GACOA,EAAEmD,OAAOC,MAERR,EAAQ5C,EAAEmD,OAAOC,MAAM,IAIvBR,EAAQ,WAKpD,kBAACC,EAAA,EAAMQ,OAAP,KACI,kBAACxD,EAAA,EAAD,CAAQX,KAAK,SAASY,QAAQ,YAAYC,QAAS0C,GAAnD,SACA,kBAAC5C,EAAA,EAAD,CAAQX,KAAK,SAASY,QAAQ,UAAUV,UAAWuD,EACvC5C,QAAS,WAAU4C,GAAMD,EAAOC,KAASH,M,kBClC1D,I,QCUA,IAAMc,EAAb,sCACWpJ,KAAO,gCADlB,KAEWQ,GAAI,iBAFf,KAGW2B,OAAS,SAACkH,EAA2BxH,EAA2ByH,GAEnE,IAAMC,EAAyB,IAAItB,IAC/BoB,EAAgBG,OAAO3H,GAAiB4H,SAAQ,SAAArI,GAAC,OAAIA,EAAEgC,iBAAiBrC,KAAI,SAAAC,GAAC,OAAIA,EAAEqC,iBAEjFqG,EAAgBJ,EACjBvI,KAAI,SAAAK,GAAC,MAAK,CAAC8B,OAAQ9B,EAAG2G,OAvBjB4B,EAuBiCJ,EAvBIrG,EAuBoB9B,EArBhE8B,EAAOE,iBAAiBuE,QAAO,SAACiC,EAAK5I,GACxC,OAAG2I,EAAuBxE,IAAInE,EAAEqC,WAErBuG,EAIAA,EAAI,IAEhB,KAXP,IAAkBD,EAAqCzG,KAwB1CI,MAAK,SAACuG,EAAEC,GACL,OAAGD,EAAE9B,MAAQ+B,EAAE/B,OAEH,EAEJ8B,EAAE9B,MAAQ+B,EAAE/B,MAET,EAIA,KAIbgC,EAAmB,GAEzB,GAAGL,EAAcjH,OAAO,EACxB,CAAC,IAAD,gBAC4BiH,GAD5B,IACI,IAAI,EAAJ,qBACA,CAAC,IADOM,EACR,QACI,GAAGN,EAAc,GAAG3B,QAAUiC,EAAajC,MAMvC,MAJAgC,EAAOjC,KAAKkC,EAAa9G,SALrC,+BAcA,OAAO6G,IC1CR,IAAME,EAAb,sCACWjK,KAAO,+BADlB,KAEWQ,GAAI,WAFf,KAGW2B,OAAS,SAACkH,EAA2BxH,EAA2ByH,GAEnE,IAAMC,EAAyB,IAAItB,IAC/BoB,EAAgBG,OAAO3H,GAAiB4H,SAAQ,SAAArI,GAAC,OAAIA,EAAEgC,iBAAiBrC,KAAI,SAAAC,GAAC,OAAIA,EAAEqC,iBAEjFqG,EAAgBJ,EACjBvI,KAAI,SAAAK,GAAC,MAAK,CAAC8B,OAAQ9B,EAAG2G,OAvBjB4B,EAuBiCJ,EAvBIrG,EAuBoB9B,EArBhE8B,EAAOE,iBAAiBuE,QAAO,SAACiC,EAAK5I,GACxC,OAAG2I,EAAuBxE,IAAInE,EAAEqC,WAErBuG,EAAI,EAIJA,IAEZ,KAXP,IAAkBD,EAAqCzG,KAwB1CI,MAAK,SAACuG,EAAEC,GACL,OAAGD,EAAE9B,MAAQ+B,EAAE/B,MAEJ,EAEH8B,EAAE9B,MAAQ+B,EAAE/B,OAER,EAID,KAIbgC,EAAmB,GAEzB,GAAGL,EAAcjH,OAAO,EACxB,CAAC,IAAD,gBAC4BiH,GAD5B,IACI,IAAI,EAAJ,qBACA,CAAC,IADOM,EACR,QACI,GAAGN,EAAc,GAAG3B,QAAUiC,EAAajC,MAMvC,MAJAgC,EAAOjC,KAAKkC,EAAa9G,SALrC,+BAcA,OAAO6G,ICrDFG,EAAe,IHC5B,sCACWlK,KAAO,gBADlB,KAEWQ,GAAI,MAFf,KAGW2B,OAAS,SAACkH,EAA2BxH,EAA2ByH,GACnE,OAA+B,IAA5BA,EAAiB7G,OAET,GAIA,CAAC6G,GAdEa,EAc4Bb,EAAiB7G,OAbxDpB,KAAK+I,MAAM/I,KAAKC,SAAWD,KAAK+I,MAAMD,OADjD,IAAsBA,IG2Bf,IC5BKE,ED4BCC,EAXb,WAEI,IAAMA,EAAU,CAAC,IAAIlB,EAAwB,IAAIa,EAAkBC,GAC7DK,EAAY,IAAIxH,IAAmBuH,EAAQvJ,KAAI,SAAAyJ,GAAC,MAAI,CAACA,EAAEhK,GAAIgK,OAEjE,MAAO,CACH9H,IAAK,kBAAM4H,GACXzC,IAAK,SAACrH,GAAD,OAAgB+J,EAAU1C,IAAIrH,KAIXiK,GEjBnBC,EAA+D,SAACC,GAAW,IAAD,EAEjD1I,IAAMC,UAAS,GAFkC,mBAE5E0I,EAF4E,KAEjEC,EAFiE,KAoB7EC,EAAaR,EAAQ5H,MAAM3B,KAAI,SAAAyJ,GAAC,OAClC,4BAAQ/D,MAAO+D,EAAEhK,IAAKgK,EAAExK,SAG5B,OACI,kBAAC+K,EAAA,EAAD,CAAWC,iBAAiB,KAC5B,kBAACC,EAAA,EAAD,KACI,kBAACF,EAAA,EAAUG,OAAX,CAAkBrH,GAAIoH,IAAKnC,OAAQlD,QAAQ,OAAOuF,SAAS,IAAItF,QAAS,kBAAMgF,GAAcD,KAA5F,iBACmBA,EAAY,MAAQ,OAEvC,kBAACG,EAAA,EAAUK,SAAX,CAAoBD,SAAS,KAC7B,kBAACF,EAAA,EAAKjC,KAAN,KACI,kBAAClE,EAAA,EAAD,CAAMkB,SAAU,SAACF,GAAD,OAAKA,EAAEG,mBACvB,kBAACnB,EAAA,EAAK4B,MAAN,CAAYC,UAAU,aAClB,kBAAC7B,EAAA,EAAKuG,MAAN,2BACA,kBAACvG,EAAA,EAAKwG,QAAN,CAAczH,GAAG,SAAS4C,MAAOkE,EAAMY,aAAaC,UACtClG,SAAU,SAACQ,GAAD,OAhChB,SAAC2F,GACrB,IAAIC,EAAcf,EAAMY,aAAaI,QACrCD,EAAYF,UAAYC,EACxBd,EAAM5I,SAAS2J,GA6B0BE,CAAgBC,SAAS/F,EAAEmD,OAAOxC,UAC/D,qCACA,qCACA,qCACA,qCACA,uCAGJ,kBAAC3B,EAAA,EAAK4B,MAAN,CAAYC,UAAU,gBAClB,kBAAC7B,EAAA,EAAKuG,MAAN,qBACA,kBAACvG,EAAA,EAAKwG,QAAN,CAAczH,GAAG,SAAS4C,MAAOkE,EAAMY,aAAaO,aAAatL,GACnD8E,SAAU,SAACQ,GAAD,OArCb,SAACiG,GACxB,IAAI5J,EAASmI,EAAQzC,IAAIkE,GACzB,GAAG5J,EACH,CACI,IAAIuJ,EAAcf,EAAMY,aAAaI,QACrCD,EAAYI,aAAe3J,EAC3BwI,EAAM5I,SAAS2J,IA+BsBM,CAAmBlG,EAAEmD,OAAOxC,SACxDqE,W,SD3DTT,O,+CAAAA,I,0DAAAA,M,KAKL,IAAM4B,EAAb,WAEI,aAAe,yBASRT,eATO,OAUPM,kBAVO,EACV3L,KAAKqL,UAAY,EACjBrL,KAAK2L,aAAexB,EAAQ5H,MAAM,GAJ1C,oDAQQ,OAAOwJ,OAAOC,OAAOhM,UAR7B,K,QEKaiM,EAAyD,SAAC,GAAY,IAAXC,EAAU,EAAVA,KAE9DC,EAAaD,EAAKhD,gBAAgBG,OAAO6C,EAAKE,mBAEpD,GAAyB,IAAtBD,EAAW7J,OAEV,OACI,kBAACuB,EAAA,EAAD,CAAWN,UAAU,QAArB,0BAMR,IAAM8I,EAA2BH,EAAKhD,gBAAgBtI,KAAI,SAAAK,GAAC,OACvD,4BAAKA,EAAE0C,eAEL2I,EAA6BJ,EAAKE,kBAAkBxL,KAAI,SAAAK,GAAC,OAC3D,wBAAIsC,UAAU,YAAYtC,EAAE0C,eAE5B4I,EAAgB,IAAI3J,IAEpB4J,EAAM,EACVL,EAAWM,SAAQ,SAAAxL,GAEfA,EAAEgC,iBAAiBwJ,SAAQ,SAAA5L,GACrB,IAAI6L,EAAsBH,EAAc7E,IAAI7G,EAAEqC,WAC1CwJ,IAEFA,EAAsB,GACtBH,EAAclH,IAAIxE,EAAEqC,UAAWwJ,IAGjCA,EAAoBF,GAAY3L,EAAE8L,YAAc,IAAM9L,EAAE+L,aAG9DJ,OAGJ,IAAMK,EAAqBxL,MAAMiE,KAAKiH,EAAcvE,QAAQ7E,OAAOvC,KAAI,SAAAf,GAEnE,IAEMiN,EAFiBzL,MAAMiE,KAAK,CAAChD,OAAQ6J,EAAW7J,SAAS,SAACyK,EAAGlM,GAAJ,OAAUA,KAElDD,KAAI,SAAA4L,GACvB,IAAIQ,EAAQT,EAAc7E,IAAI7H,GAC9B,OAAGmN,GAASA,EAAMR,GAEP,4BAAKQ,EAAMR,IAIX,uCAIf,OAAQ,4BACI,4BAAK3M,GACJiN,MAKjB,OACI,kBAACjJ,EAAA,EAAD,CAAWN,UAAU,QACrB,kBAAC0J,EAAA,EAAD,CAAOC,SAAO,EAACC,UAAQ,EAAClI,KAAK,MACzB,+BACI,4BACA,6BACCoH,EACAC,IAGL,+BACCO,M,QCxEAO,EAAqD,SAAC5C,GAAW,IAAD,EAErC1I,IAAMC,SAClByI,EAAMzH,OAAOyH,EAAMzH,OAAOjC,SAASiL,OAAOC,OAAO,KAHA,mBAElEqB,EAFkE,KAEtDC,EAFsD,OAI7BxL,IAAMC,UAAUyI,EAAMzH,QAJO,mBAIlEwK,EAJkE,KAIlDC,EAJkD,OAKjB1L,IAAMC,UAAS,GALE,mBAKlE0L,EALkE,KAK5CC,EAL4C,OAY/B5L,IAAMC,SAASyI,EAAMzH,OACjByH,EAAMzH,OAAOE,iBAJpCrC,KAAI,SAAAC,GAAC,OAAEA,EAAEqC,UAAY,IAAMrC,EAAE8L,YAAc,IAAM9L,EAAE+L,aAAW/F,KAAK,MAIb,IAbJ,mBAYlE8G,EAZkE,KAYnDC,EAZmD,KAqFnEC,EAAe,WAEdrD,EAAMzH,QAELyH,EAAMsD,SAAStD,EAAMzH,SAI7B,OACI,kBAACyF,EAAA,EAAD,CAAOC,MAAM,EAAMC,OAAQ8B,EAAMpC,SACjC,kBAACI,EAAA,EAAMG,OAAP,CAAcC,aAAW,GACzB,kBAACJ,EAAA,EAAM/E,MAAP,wBAEA,kBAAC+E,EAAA,EAAMK,KAAP,KACA,kBAAClE,EAAA,EAAD,KACA,kBAACA,EAAA,EAAK4B,MAAN,CAAYC,UAAU,aAClB,kBAAC7B,EAAA,EAAKwG,QAAN,CAActG,KAAK,QAAQyB,MAAO+G,EAAW/M,MAAO6F,YAAY,QACrC4H,UAAWR,EAAgBpI,SAvF7C,SAACQ,GACd,IAAIqI,EAASrI,EAAEU,cAAcC,MAC7BkH,GAAmBQ,GAA4B,IAAlBA,EAAO1L,QACpCgL,GAAc,SAAArM,GAAC,kCAASA,GAAM,CAACX,MAAO0N,UAqFlC,kBAACrJ,EAAA,EAAKwG,QAAQ8C,SAAd,CAAuBpJ,KAAK,WAA5B,oBAEJ,kBAACF,EAAA,EAAK4B,MAAN,CAAYC,UAAU,eAClB,kBAAC7B,EAAA,EAAKwG,QAAN,CAAczH,GAAG,WAAW4C,MAAO+G,EAAW9M,QAAS4E,SArF5C,SAACQ,GAChB,IAAIqI,EAAiBrI,EAAEU,cAAcC,MACrCgH,GAAc,SAAArM,GAAC,kCAASA,GAAM,CAACV,QAASyN,QAmFyCE,KAAM,EAAG/H,YAAY,aAEtG,kBAACxB,EAAA,EAAK4B,MAAN,CAAYC,UAAU,cAClB,kBAAC7B,EAAA,EAAKwG,QAAN,CAActG,KAAK,SAASyB,MAAO+G,EAAW7M,OAAQ2E,SAnF5C,SAACQ,GACf,IAAIqI,EAAkBrI,EAAEU,cAAcC,MACtCgH,GAAc,SAAArM,GAAC,kCAASA,GAAM,CAACT,OAAQwN,QAiFwC7H,YAAY,8BAE3F,kBAACxB,EAAA,EAAK4B,MAAN,CAAYC,UAAU,eAClB,kBAAC7B,EAAA,EAAKwG,QAAN,CAActG,KAAK,UAAUyB,MAAO+G,EAAW3M,eACnByE,SAlFjB,SAACQ,GAChB,IAAIqI,EAA6BG,OAAOzC,SAAS/F,EAAEU,cAAcC,OAC9D8H,MAAMJ,KAASA,OAAS7N,GAC3BmN,GAAc,SAAArM,GAAC,kCAASA,GAAM,CAACP,eAAgBsN,QA+EO7H,YAAY,+BAElE,kBAACxB,EAAA,EAAK4B,MAAN,CAAYC,UAAU,mBAClB,kBAAC7B,EAAA,EAAKwG,QAAN,CAAczH,GAAG,WAAW4C,MAAOqH,EAAeO,KAAM,EAC5B/I,SAhFV,SAACQ,GAEvBiI,EAAiBjI,EAAEU,cAAcC,OACjC,IAAI+H,EAAkB1I,EAAEU,cAAcC,MAAMgI,MAAM,SAElD,GAAoB,IAAjBD,EAAM/L,OAELgL,GAAc,SAAArM,GAAC,kCAASA,GAAM,CAACN,YAAa,YAGhD,CACI,IAAIA,EAAgC,GAChC4N,GAAU,EAEdF,EAAM5B,SAAQ,SAAA+B,GACV,GAAGA,EAAKlM,OAAO,EACf,CACI,IAAImM,EAAkBD,EAAKF,MAAM,KAAK1N,KAAI,SAAA8N,GAAC,OAAEA,EAAErM,UAC7B,IAAfoM,EAAMnM,QACW,IAAlBmM,EAAM,GAAGnM,QAAgC,IAAlBmM,EAAM,GAAGnM,QAAgC,IAAlBmM,EAAM,GAAGnM,QACvD,GAAG6L,OAAOzC,SAAS+C,EAAM,MAAMA,EAAM,GAEnCF,GAAU,EAIV5N,EAAYgH,KAAK,CAAC9H,KAAM4O,EAAM,GAAI3O,OAAQqO,OAAOzC,SAAS+C,EAAM,IAAK1O,KAAM0O,EAAM,SAK1FF,EAECb,GAAwB,IAIxBA,GAAwB,GACxBJ,GAAc,SAAArM,GAAC,kCAASA,GAAM,CAACN,YAAaA,UA0CSoN,UAAWN,EACxCtH,YAAY,wCACxC,kBAACxB,EAAA,EAAKwG,QAAQ8C,SAAd,CAAuBpJ,KAAK,WAA5B,kBAAsD,IAAtD,OAA+D,IAA/D,IAAqE,IAArE,SAAgF,IAAhF,IAAsF,IAAtF,OAA+F,IAA/F,wBAIJ,kBAAC2D,EAAA,EAAMQ,OAAP,KACA,kBAACxD,EAAA,EAAD,CAAQX,KAAK,SAASY,QAAQ,YAAYC,QAAS8E,EAAMpC,SAAzD,SACA,kBAAC5C,EAAA,EAAD,CAAQX,KAAK,SAASY,QAAQ,UAAUC,QA7CzB,WAEf8E,EAAMmE,OAAOvO,EAAOmB,SAAS8L,KA2CgCtI,SAAUwI,GAAgBE,GAAvF,eACE,WACE,GAAGjD,EAAMzH,OACL,OAAQ,kBAACyC,EAAA,EAAD,CAAQX,KAAK,SAASY,QAAQ,UAAUC,QAASmI,GAAjD,iBAFd,MCxIGe,EAAb,WAEI,aAAe,yBASR1F,qBATO,OAUPkD,uBAVO,EACVpM,KAAKkJ,gBAAkB,GACvBlJ,KAAKoM,kBAAoB,GAJjC,oDAQQ,OAAOL,OAAOC,OAAOhM,UAR7B,KCIO,SAAS6O,EAAapN,EAA0BqN,EAAoBC,GAEvE,IAAMC,EAAuB9N,KAAK8I,IAAI,EAAG+E,EAAS1D,UAAYyD,EAAa5F,gBAAgB5G,QAErF2M,EAAe,IAAInH,IAAIrG,EAAYc,MAAM3B,KAAI,SAAAK,GAAC,OAAEA,EAAE4B,YAClDqM,EAAgB,IAAIpH,IAAImH,GAC9BH,EAAa5F,gBAAgBuD,SAAQ,SAAAxL,GAAC,OAAEiO,EAAc9J,OAAOnE,EAAE4B,YAI/D,IAFA,IAAMsM,EAA6B,GAE3BtO,EAAE,EAAGA,EAAEmO,EAAsBnO,IACrC,CACI,IAAIuO,EAAc3N,EAAYsG,OAAO1G,MAAMiE,KAAK4J,IAC5CG,EAAiBN,EAASpD,aAAa3J,OAAO8M,EAAa5F,gBAAiBiG,EAAkBC,GAElG,GAAGC,EAAe/M,OAAS,EAC3B,CACI,IAAIgN,EAAcvF,EAAa/H,OAAO8M,EAAa5F,gBAAiBiG,EAAkBE,GAAgB,GAEtGF,EAAiBxH,KAAK2H,GACtBJ,EAAc9J,OAAOkK,EAAYzM,UAIzC,IAAM0M,EAAUT,EAAatD,QAG7B,OAFA+D,EAAQnD,kBAAoB+C,EAErBI,E,UCRLC,EAAqC,SAAC,GAA8C,IAA7CC,EAA4C,EAA5CA,WAAYC,EAAgC,EAAhCA,YAAaC,EAAmB,EAAnBA,cAElE,OACI,kBAACC,EAAA,EAAD,CAAQC,GAAG,OAAOpK,QAAQ,QAC1B,kBAACmK,EAAA,EAAOE,MAAR,CAAcC,KAAK,SAAnB,UACA,kBAACH,EAAA,EAAO7E,OAAR,CAAeiF,gBAAc,qBAC7B,kBAACJ,EAAA,EAAO3E,SAAR,CAAiB5K,GAAG,oBAChB,kBAAC4P,EAAA,EAAD,CAAK1M,UAAU,WACf,kBAAC2M,EAAA,EAAD,CAAa5P,MAAM,UAAUD,GAAG,2BAC9B,kBAAC6P,EAAA,EAAYxL,KAAb,CAAkBqL,KAAK,IAAIrK,QAAS+J,GAApC,mBACA,kBAACS,EAAA,EAAYxL,KAAb,CAAkBqL,KAAMJ,EAAeQ,SAAS,IAAhD,mBACA,kBAACD,EAAA,EAAYxL,KAAb,CAAkBqL,KAAK,GAAGrK,QAASgK,GAAnC,sBAmMCU,E,kDA9KX,WAAY5F,GAAY,IAAD,uBACnB,cAAMA,IAkBV6F,WAAa,SAACC,GACV,EAAKC,UAAS,SAAAC,GAKV,OAJAF,EAAW7D,SAAQ,SAAC1J,GAChByN,EAAG/O,YAAYyF,IAAInE,MAGhB,CAACtB,YAAa+O,EAAG/O,YAChByK,KAAM2C,EAAa2B,EAAG/O,YAAa+O,EAAGtE,KAAMsE,EAAGpF,mBA1BxC,EA8BvBqF,WAAa,SAAC1N,GACV,EAAKsN,WAAW,CAACtN,IACjB,EAAK2N,qBAhCc,EAmCvBC,aAAe,SAACC,GAAmC,IAAD,EAC1CnO,EAAG,UAAGmO,EAAG9H,cAAN,aAAG,EAAWc,OAErB,GAAiB,iBAAPnH,EAEN,IAEI,EAAK4N,WdoFd,SAA4BQ,GAC/B,IAAIC,EAAOC,KAAKC,MAAMH,GAEtB,GAAGxP,MAAMC,QAAQwP,GAGb,OADuBA,EACblQ,IAAIR,EAAOmB,UAGzB,GAAmB,kBAATuP,EACV,CACI,IAAI7P,EAAoB6P,EAExB,GAAwB,qBAAd7P,EAAEgQ,QACZ,CACI,GAAiB,IAAdhQ,EAAEgQ,QAED,MAAM,IAAI/Q,MAAM,+BAGpB,GAAGmB,MAAMC,QAAQL,EAAEiQ,SAEf,OAAOjQ,EAAEiQ,QAAQtQ,IAAIR,EAAOmB,WAKxC,MAAM,IAAIrB,MAAM,uBc/GYiR,CAAmB1O,IAEvC,MAAMkD,GAEF,EAAK4K,SAAS,CAACa,MAAOzL,EAAE0L,UAIhC,EAAKC,uBAlDc,EAqDvBC,SAAW,SAACjJ,GACR,IAAIkJ,EAAS,IAAIC,WACjBD,EAAOE,OAAS,SAACd,GAAD,OAAQ,EAAKD,aAAaC,IAC1CY,EAAOG,WAAWrJ,IAxDC,EA2DvBsJ,sBAAwB,WACpB,Id8DyBV,Ec9DrBL,EAAO,IAAIgB,KAAK,Ed8DKX,Ec9Da,EAAKY,MAAMrQ,YAAYc,Md+D1DwO,KAAKgB,UAAU,CAACd,QAAS,EAAGC,QAASA,Mc/D8B,CAACrM,KAAM,wBAE7E,OADUmN,OAAOC,IAAIC,gBAAgBrB,IA7DlB,EAiEvBsB,mBAAqB,WACjB,EAAK5B,SAAS,CAAC4B,oBAAoB,KAlEhB,EAqEvBC,iBAAmB,WACf,EAAK7B,SAAS,CAAC6B,kBAAkB,KAtEd,EAyEvBd,oBAAsB,WAClB,EAAKf,SAAS,CAAC4B,oBAAoB,KA1EhB,EA6EvBzB,kBAAoB,WAChB,EAAKH,SAAS,CAAC6B,kBAAkB,EAAOC,kBAAclS,KA9EnC,EAiFvBmS,aAAe,WACX,EAAK/B,SAAS,CAACa,MAAO,QAlFH,EAqFvBmB,mBAAqB,SAACC,GAClB,EAAKjC,UAAS,SAAAC,GACV,MAAO,CAACpF,aAAcoH,EACdtG,KAAM2C,EAAa2B,EAAG/O,YAAa+O,EAAGtE,KAAMsG,QAxFrC,EA4FvBC,sBAAwB,SAACC,GACrB,EAAKnC,UAAS,SAAAC,GACV,IAAIjB,EAAgBxD,OAAOC,OAAOwE,EAAGtE,MAErC,OADAqD,EAAQrG,gBAAkBwJ,EACnB,CAACxG,KAAM2C,EAAa2B,EAAG/O,YAAa8N,EAASiB,EAAGpF,mBAhGxC,EAoGvBuH,WAAa,SAAC5P,GACV,EAAKwN,SAAS,CAAC6B,kBAAkB,EAClBC,aAActP,KAtGV,EAyGvB8K,aAAe,SAAC9K,GACZ,EAAKwN,UAAS,SAAAC,GAGV,OAFAA,EAAG/O,YAAY2D,OAAOrC,EAAOF,SAEtB,CAACpB,YAAa+O,EAAG/O,YAChByK,KAAM2C,EAAa2B,EAAG/O,YAAa+O,EAAGtE,KAAMsE,EAAGpF,cAC/CgH,kBAAkB,EAClBC,kBAAclS,OA7G1B,IAAIsB,EAAc,IAAIgF,EAClB2E,EAAe,IAAIU,EAJJ,OAQnB,EAAKgG,MAAQ,CACTrQ,YAAaA,EACb2J,aAAcA,EACdc,KAAM2C,EAAapN,EAAa,IAAImN,EAAQxD,GAC5C+G,oBAAoB,EACpBC,kBAAkB,EAClBC,kBAAclS,EACdiR,MAAO,MAfQ,E,qDAoHb,IAAD,OACL,OACI,kBAACvN,EAAA,EAAD,CAAW+O,OAAK,EAACrP,UAAU,OAEvB,kBAACsP,EAAA,EAAD,CAAOpN,QAAQ,SAAS2C,QAASpI,KAAKsS,aAAc7J,OAAQzI,KAAK8R,MAAMV,MAAO0B,aAAW,GACpF9S,KAAK8R,MAAMV,OAGd,WACE,GAAG,EAAKU,MAAMK,mBACV,OAAQ,kBAAC,EAAD,CACI/J,QAAS,EAAKkJ,oBACdhR,MAAM,oBACN6H,gBAAgB,eAChBE,OAAQ,EAAKkJ,WAN/B,GAUA,WACE,GAAG,EAAKO,MAAMM,iBACV,OAAQ,kBAAC,EAAD,CACIhK,QAAS,EAAKsI,kBACd/B,OAAQ,EAAK8B,WACb3C,SAAU,EAAKD,aACf9K,OAAQ,EAAK+O,MAAMO,eANrC,GAUF,kBAACvO,EAAA,EAAD,KACI,kBAACT,EAAA,EAAD,KACI,kBAAC,EAAD,CAAMoM,WAAYzP,KAAKmS,mBACjBzC,YAAa1P,KAAKoS,iBAClBzC,cAAe3P,KAAK4R,4BAGlC,kBAAC9N,EAAA,EAAD,KACI,kBAACT,EAAA,EAAD,KACI,kBAAC,EAAD,CAAmB+H,aAAcpL,KAAK8R,MAAM1G,aACzBxJ,SAAU5B,KAAKuS,uBAG1C,kBAACzO,EAAA,EAAD,CAAKP,UAAU,QACX,kBAACF,EAAA,EAAD,CAAK0P,GAAG,KACJ,kBAAC,EAAD,CAAgBrR,gBAAiB1B,KAAK8R,MAAM5F,KAAKhD,gBACjCzH,YAAazB,KAAK8R,MAAMrQ,YACxBE,cAAe3B,KAAK8R,MAAM1G,aAAaC,UACvCzJ,SAAU5B,KAAKyS,sBACf5Q,OAAQ7B,KAAK2S,cAEjC,kBAACtP,EAAA,EAAD,KACI,kBAAC,EAAD,CAAgB6I,KAAMlM,KAAK8R,MAAM5F,KAAMd,aAAcpL,KAAK8R,MAAM1G,sB,GAxKtEtJ,IAAMkR,WClDxBC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,W","file":"static/js/main.85cbca3b.chunk.js","sourcesContent":["export interface IngredientJSON {\r\n    name: string,\r\n    amount: number,\r\n    unit: string\r\n}   \r\n \r\nexport interface RecipeJSON {\r\n    id: string,\r\n    title: string,\r\n    sourceUrl?:  string,\r\n    source?: string,\r\n    summary?: string,\r\n    readyInMinutes?: number,\r\n    ingredients: IngredientJSON[]\r\n}\r\n\r\ninterface RecipeFileJSON {\r\n    version: number,\r\n    recipes: RecipeJSON[]\r\n}\r\n\r\nexport class Ingredient {\r\n\r\n    private constructor(name: string, amount: number, unit: string)\r\n    {\r\n        this.name = name;\r\n        this.amount = amount;\r\n        this.unit = unit;\r\n    }\r\n\r\n    public getName(): string\r\n    {\r\n        return this.name;\r\n    }\r\n\r\n    public getAmount(): number\r\n    {\r\n        return this.amount;\r\n    }\r\n\r\n    public getUnit(): string\r\n    {\r\n        return this.unit;\r\n    }\r\n\r\n    public static fromJSON(o: IngredientJSON) : Ingredient\r\n    {\r\n        if(!o.name)\r\n        {\r\n            throw new Error(\"Missing ingredient name\");\r\n        }\r\n\r\n        if(!o.unit)\r\n        {\r\n            throw new Error(\"Missing ingredient unit\");\r\n        }\r\n\r\n        if(o.amount === undefined)\r\n        {\r\n            throw new Error(\"Missing ingredient amount\");\r\n        }\r\n\r\n        return new Ingredient(o.name, o.amount, o.unit);\r\n    }\r\n\r\n    public toJSON() : IngredientJSON\r\n    {\r\n        return {\r\n            name: this.name,\r\n            amount: this.amount,\r\n            unit: this.unit\r\n        }\r\n    }\r\n\r\n    private name: string; \r\n    private amount: number;\r\n    private unit: string;\r\n}\r\n\r\nfunction uuidv4() {\r\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n      var r = Math.random() * 16 | 0, v = c === 'x' ? r : ((r & 0x3) | 0x8);\r\n      return v.toString(16);\r\n    });\r\n  }\r\n\r\nexport class Recipe {\r\n    \r\n    private constructor(id: string, title: string)\r\n    {\r\n        this.id = id;\r\n        this.title = title;\r\n        this.ingredients = [];\r\n    }\r\n\r\n    public getId(): string\r\n    {\r\n        return this.id;\r\n    }\r\n\r\n    public getTitle(): string\r\n    {\r\n        return this.title;\r\n    }\r\n\r\n    public getSummary(): string | undefined\r\n    {\r\n        return this.summary;\r\n    }\r\n\r\n    public getSource(): string | undefined\r\n    {\r\n        return this.source;\r\n    }\r\n\r\n    public getSourceUrl(): string | undefined\r\n    {\r\n        return this.sourceUrl;\r\n    }\r\n\r\n    public getReadyInMinutes(): number | undefined\r\n    {\r\n        return this.readyInMinutes;\r\n    }\r\n\r\n    public getIngredients(): Ingredient[] \r\n    {\r\n        return this.ingredients;\r\n    }\r\n\r\n    public static fromJSON(o: RecipeJSON) : Recipe\r\n    {\r\n        if(!o.id)\r\n        {\r\n            o.id = uuidv4();\r\n        }\r\n\r\n        if(!o.title)\r\n        {\r\n            throw new Error(\"Missing recipe title\");\r\n        }\r\n\r\n        let r = new Recipe(o.id, o.title);\r\n\r\n        r.summary = o.summary;\r\n        r.source = o.source;\r\n        r.sourceUrl = o.sourceUrl;\r\n        r.readyInMinutes = o.readyInMinutes;\r\n\r\n        if(Array.isArray(o.ingredients))\r\n        {\r\n            r.ingredients = o.ingredients.map(i => Ingredient.fromJSON(i));\r\n        }\r\n\r\n        return r;\r\n    }\r\n\r\n    public toJSON() : RecipeJSON\r\n    {\r\n        return {\r\n            id: this.id,\r\n            title: this.title,\r\n            summary: this.summary,\r\n            source: this.source,\r\n            sourceUrl: this.sourceUrl,\r\n            readyInMinutes: this.readyInMinutes,\r\n            ingredients: this.ingredients.map(i=>i.toJSON())\r\n        }\r\n    }\r\n\r\n    private id: string;\r\n    private title: string;\r\n    private summary?: string;\r\n    private source?: string;\r\n    private sourceUrl?: string;\r\n    private readyInMinutes?: number;\r\n    private ingredients: Ingredient[];\r\n}\r\n\r\nexport function serializeRecipes(recipes: Recipe[]) {\r\n    return JSON.stringify({version: 1, recipes: recipes});\r\n}\r\n\r\nexport function deserializeRecipes(data: string) {\r\n    let json = JSON.parse(data);\r\n\r\n    if(Array.isArray(json))\r\n    {\r\n        let v0: RecipeJSON[] = json;\r\n        return v0.map(Recipe.fromJSON);\r\n    }\r\n\r\n    if(typeof json === 'object')\r\n    {\r\n        let r: RecipeFileJSON = json;\r\n        \r\n        if(typeof r.version !== 'undefined')\r\n        {\r\n            if(r.version !== 1)\r\n            {\r\n                throw new Error(\"Invalid recipe file version\");\r\n            }\r\n    \r\n            if(Array.isArray(r.recipes))\r\n            {\r\n                return r.recipes.map(Recipe.fromJSON);\r\n            }    \r\n        }\r\n    }\r\n\r\n    throw new Error(\"Invalid recipe file\");\r\n}","import React, {FunctionComponent} from 'react';\r\n\r\nimport {Form, ListGroup, FormControl, InputGroup} from 'react-bootstrap';\r\nimport {Container, OverlayTrigger, Popover, Col, Row, Image} from 'react-bootstrap';\r\nimport {Button} from 'react-bootstrap';\r\n\r\nimport {Recipe} from '../model/Recipe';\r\nimport {RecipeIndex} from '../RecipeDB';\r\n\r\ntype RecipeSelectorProps = {\r\n    recipeIndex: RecipeIndex,\r\n    selectedRecipes: Recipe[],\r\n    maxNrSelected: number,\r\n    onUpdate: (recipes: Recipe[]) => void,\r\n    onEdit: (recipe: Recipe) => void\r\n}\r\n\r\nexport const RecipeSelector: FunctionComponent<RecipeSelectorProps> = ({recipeIndex, selectedRecipes, maxNrSelected, onUpdate, onEdit}) => {\r\n\r\n    const [filter, setFilter] = React.useState(\"\");\r\n    const [currentRecipeid, setCurrentRecipeId] = React.useState<string | null>(null);\r\n\r\n    const refresh = (event : React.ChangeEvent<HTMLInputElement>) => {\r\n        setFilter(event.currentTarget.value);\r\n    }\r\n\r\n    const filteredRecipes = (filter.trim().length === 0) ? \r\n        recipeIndex.all() : recipeIndex.search(filter).map(res=>res.key);\r\n\r\n    const selectedRecipeMap = new Map(selectedRecipes.map(r => [r.getId(), r]))\r\n\r\n    const toggleSelection = (r: Recipe) => {\r\n        if(selectedRecipeMap.has(r.getId()))\r\n        {\r\n            selectedRecipeMap.delete(r.getId());\r\n        }\r\n        else\r\n        {\r\n            selectedRecipeMap.set(r.getId(), r);\r\n        }\r\n\r\n        onUpdate(Array.from(selectedRecipeMap.values()));\r\n    }\r\n\r\n    const renderRecipe = (recipe: Recipe) => {\r\n\r\n        const summary = recipe.getSummary() ? recipe.getSummary() : \"Summary is not available\"\r\n        const ingredients = recipe.getIngredients().map(r=> r.getName())\r\n                                              .sort()\r\n                                              .map(n => <Col sm=\"auto\" className=\"border mt-1 ml-2 pt-2 pb-2\">{n}</Col>)\r\n\r\n        return (\r\n            <Popover id=\"popover-basic\">\r\n                <Popover.Title as=\"h4\">{recipe.getTitle()}</Popover.Title>\r\n                <Popover.Content>\r\n                <Container className=\"pl-0 pr-0\">\r\n                <Row className=\"pb-2\">\r\n                    <Col>{summary}</Col>\r\n                </Row>\r\n                <Row className=\"pb-2\">\r\n                    <Col sm=\"auto\"><Image src=\"clock20x20.jpg\"/></Col>\r\n                    <Col sm=\"auto\">{recipe.getReadyInMinutes() ? \"\" + recipe.getReadyInMinutes() + \" mintes\" : \"unknown\"}</Col>\r\n                    <Col sm=\"auto\"><Image src=\"babyowl17x20.jpg\"/></Col>\r\n                    <Col sm=\"auto\">{recipe.getSource() ? recipe.getSource() : \"-\"}</Col>\r\n                </Row>\r\n                <Row>\r\n                        {ingredients}\r\n                </Row>\r\n                </Container> \r\n                </Popover.Content>\r\n            </Popover>)\r\n    }\r\n\r\n    const editButton = (recipe: Recipe) => {\r\n        if(currentRecipeid===recipe.getId())\r\n        {\r\n            return <Button variant=\"outline-primary\" size=\"sm\" className=\"mt-2\" onClick={e=>onEdit(recipe)}>Edit</Button>\r\n        }\r\n        else\r\n        {\r\n            return \"\"\r\n        }\r\n    }\r\n\r\n    const listItems = filteredRecipes\r\n        .map((recipe) =>\r\n                <OverlayTrigger placement=\"right\" overlay={renderRecipe(recipe)} \r\n                                    onEnter={()=>setCurrentRecipeId(recipe.getId())}\r\n                                    onExit={()=>setCurrentRecipeId(null)}>\r\n                    <ListGroup.Item key={recipe.getId()}>\r\n                        <Form.Check type=\"checkbox\" \r\n                                    id={recipe.getId()}\r\n                                    label={recipe.getTitle()}\r\n                                    disabled={!selectedRecipeMap.has(recipe.getId()) && selectedRecipeMap.size >= maxNrSelected}\r\n                                    checked={selectedRecipeMap.has(recipe.getId())}\r\n                                    onChange={() => toggleSelection(recipe)}/>\r\n                        {editButton(recipe)}\r\n                    </ListGroup.Item>\r\n                </OverlayTrigger>\r\n            );\r\n\r\n    return (\r\n        <Form className=\"pt-2\" onSubmit={(e)=>e.preventDefault()}>\r\n        <InputGroup className=\"mb-2\">\r\n        <InputGroup.Prepend>\r\n        <InputGroup.Text id=\"basic-addon1\">@</InputGroup.Text>\r\n        </InputGroup.Prepend>\r\n        <FormControl type=\"text\" placeholder=\"Filter recipes\" onChange={refresh}/>\r\n        </InputGroup>\r\n        <Form.Group controlId=\"recipeGroup\">\r\n            <ListGroup>{listItems}</ListGroup>\r\n        </Form.Group>\r\n        </Form>\r\n    );\r\n}","import { Index, createIndex, addDocumentToIndex, removeDocumentFromIndex } from 'ndx';\r\nimport { query, QueryResult } from 'ndx-query';\r\nimport { words } from 'lodash';\r\n\r\nimport { Recipe } from './model/Recipe';\r\n\r\nexport class RecipeIndex {\r\n\r\n    private recipesMap: Map<string, Recipe>;\r\n    private index: Index<string>;\r\n\r\n    private fieldAccessors = [\r\n        (r: Recipe) => r.getTitle(),\r\n        (r: Recipe) => r.getSummary() ?? \"\",\r\n        (r: Recipe) => r.getIngredients().map(i => i.getName()).join(\" \")\r\n    ]\r\n\r\n    private fieldBoostFactors = [2, 0.5, 1];\r\n\r\n    constructor() {\r\n        this.index = createIndex<string>(3);\r\n        this.recipesMap = new Map(); \r\n    }\r\n\r\n    private termFilter = (term: string) => {\r\n        return term.toLowerCase();\r\n    }\r\n\r\n    // `add()` function will add documents to the index.\r\n    public add = (r: Recipe) => {\r\n        let key = r.getId();\r\n\r\n        this.delete(key);\r\n        this.recipesMap.set(key, r);\r\n\r\n        // Don't add the same document twice, ndx becomes crazy...\r\n        if(!this.index.docs.has(key))\r\n        {\r\n            addDocumentToIndex(\r\n                this.index,\r\n                this.fieldAccessors,\r\n                // Tokenizer is a function that breaks text into words, phrases, symbols, or other meaningful elements\r\n                // called tokens.\r\n                // Lodash function `words()` splits string into an array of its words, see https://lodash.com/docs/#words for\r\n                // details.\r\n                words,\r\n                // Filter is a function that processes tokens and returns terms, terms are used in Inverted Index to\r\n                // index documents.\r\n                this.termFilter,\r\n                // Document key, it can be a unique document id or a reference to a document if you want to store all documents\r\n                // in memory.\r\n                key,\r\n                // Document.\r\n                r,\r\n            );\r\n\r\n        }\r\n        return true;\r\n    };\r\n\r\n    // `search()` function will be used to perform queries.\r\n    public search = (q: string) => query<string>(\r\n          this.index,\r\n          this.fieldBoostFactors,\r\n          // BM25 ranking function constants:\r\n          1.2,  // BM25 k1 constant, controls non-linear term frequency normalization (saturation).\r\n          0.75, // BM25 b constant, controls to what degree document length normalizes tf values.\r\n          words,\r\n          this.termFilter,\r\n          // Set of removed documents, in this example we don't want to support removing documents from the index,\r\n          // so we can ignore it by specifying this set as `undefined` value.\r\n          undefined, \r\n          q,\r\n        ).reduce((acc: QueryResult<Recipe>[],res) => {\r\n            let r = this.recipesMap.get(res.key);\r\n            if(r)\r\n            {\r\n                acc.push({key: r, score: res.score});\r\n            }\r\n            return acc;\r\n        }, []);\r\n\r\n    public all = () => {\r\n        return Array.from(this.recipesMap.values());\r\n    };\r\n\r\n    public get = (key: string) => {\r\n        return this.recipesMap.get(key);\r\n    };\r\n\r\n    public delete = (key: string) => {\r\n        removeDocumentFromIndex(\r\n            this.index,\r\n            new Set(),\r\n            key);        \r\n        this.recipesMap.delete(key);\r\n    };\r\n\r\n    public getAll = (keys: string[]) => {\r\n        return keys.reduce((acc: Recipe[],key) => {\r\n            let r = this.recipesMap.get(key);\r\n            if(r)\r\n            {\r\n                acc.push(r);\r\n            }\r\n            return acc;\r\n        }, []);\r\n    }\r\n};\r\n    \r\n","import React, {FunctionComponent} from 'react';\r\n\r\nimport {Modal, Form, FormControl, Button} from 'react-bootstrap';\r\n\r\ntype LoadFileDialogProps = {\r\n    title: string,\r\n    loadButtonTitle: string,\r\n    onClose: () => void,\r\n    onLoad: (file: File) => void\r\n}\r\n\r\ntype LoadFileDialogState = {\r\n    file: null | File\r\n}\r\n\r\nexport const LoadFileDialog: FunctionComponent<LoadFileDialogProps> = ({title, loadButtonTitle, onClose, onLoad}) => {\r\n\r\n    const [file, setFile] = React.useState<null | File>(null);\r\n\r\n    return (\r\n        <Modal show={true} onHide={onClose}>\r\n        <Modal.Header closeButton>\r\n        <Modal.Title>{title}</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n        <Form>\r\n        <FormControl type=\"file\" onChange={(e: React.ChangeEvent<HTMLInputElement>) => {\r\n                                                if(e.target.files)\r\n                                                {\r\n                                                    setFile(e.target.files[0])\r\n                                                }\r\n                                                else\r\n                                                {\r\n                                                    setFile(null)\r\n                                                }\r\n                                            }}/>\r\n        </Form>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n            <Button type=\"button\" variant=\"secondary\" onClick={onClose}>Close</Button>\r\n            <Button type=\"button\" variant=\"primary\" disabled={!file} \r\n                        onClick={() => {if(file) onLoad(file)}}>{loadButtonTitle}</Button>\r\n        </Modal.Footer>   \r\n        </Modal>\r\n    );\r\n}","import {Filter} from './Filter';\r\nimport {Recipe} from '../model/Recipe';\r\n\r\nfunction getRandomInt(max: number) {\r\n    return Math.floor(Math.random() * Math.floor(max));\r\n}\r\n\r\nexport class RandomFilter implements Filter {\r\n    public name = \"Random filter\";\r\n    public id =\"rnd\";\r\n    public filter = (explicitRecipes: Recipe[], selectedRecipes: Recipe[], remainingRecipes: Recipe[]) => {\r\n        if(remainingRecipes.length === 0)\r\n        {\r\n            return []\r\n        }\r\n        else\r\n        {\r\n            return [remainingRecipes[getRandomInt(remainingRecipes.length)]];\r\n        }\r\n    }\r\n}","import {Filter} from './Filter';\r\nimport {Recipe} from '../model/Recipe';\r\n\r\nfunction getScore(ingredientsAlreadyUSed: Set<string>, recipe: Recipe) {\r\n    \r\n    return recipe.getIngredients().reduce((sum, i) => {\r\n        if(ingredientsAlreadyUSed.has(i.getName()))\r\n        {\r\n            return sum;\r\n        }\r\n        else\r\n        {\r\n            return sum+1;\r\n        }\r\n    }, 0);\r\n}\r\n\r\nexport class MinIngredientsFilter implements Filter {\r\n    public name = \"Minimal number of ingredients\";\r\n    public id =\"miningredients\";\r\n    public filter = (explicitRecipes: Recipe[], selectedRecipes: Recipe[], remainingRecipes: Recipe[]) => {\r\n\r\n        const ingredientsAlreadyUsed = new Set<string>(\r\n            explicitRecipes.concat(selectedRecipes).flatMap(r => r.getIngredients().map(i => i.getName())));\r\n\r\n        const scoredRecipes = remainingRecipes\r\n            .map(r => ({recipe: r, score: getScore(ingredientsAlreadyUsed, r)}))\r\n            .sort((a,b) => {\r\n                if(a.score < b.score)\r\n                {\r\n                    return -1;\r\n                }\r\n                else if(a.score > b.score)\r\n                {\r\n                    return 1;\r\n                }\r\n                else\r\n                {\r\n                    return 0;\r\n                }\r\n            });\r\n\r\n        const result: Recipe[] = [];\r\n\r\n        if(scoredRecipes.length>0)\r\n        {\r\n            for(let scoredRecipe of scoredRecipes)\r\n            {\r\n                if(scoredRecipes[0].score === scoredRecipe.score)\r\n                {\r\n                    result.push(scoredRecipe.recipe);\r\n                }\r\n                else\r\n                {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        \r\n        return result;\r\n    }\r\n}","import {Filter} from './Filter';\r\nimport {Recipe} from '../model/Recipe';\r\n\r\nfunction getScore(ingredientsAlreadyUSed: Set<string>, recipe: Recipe) {\r\n    \r\n    return recipe.getIngredients().reduce((sum, i) => {\r\n        if(ingredientsAlreadyUSed.has(i.getName()))\r\n        {\r\n            return sum+1;\r\n        }\r\n        else\r\n        {\r\n            return sum;\r\n        }\r\n    }, 0);\r\n}\r\n\r\nexport class MaxReuseFilter implements Filter {\r\n    public name = \"Maximal reuse of ingredients\";\r\n    public id =\"maxreuse\";\r\n    public filter = (explicitRecipes: Recipe[], selectedRecipes: Recipe[], remainingRecipes: Recipe[]) => {\r\n\r\n        const ingredientsAlreadyUsed = new Set<string>(\r\n            explicitRecipes.concat(selectedRecipes).flatMap(r => r.getIngredients().map(i => i.getName())));\r\n\r\n        const scoredRecipes = remainingRecipes\r\n            .map(r => ({recipe: r, score: getScore(ingredientsAlreadyUsed, r)}))\r\n            .sort((a,b) => {\r\n                if(a.score < b.score)\r\n                {\r\n                    return 1;\r\n                }\r\n                else if(a.score > b.score)\r\n                {\r\n                    return -1;\r\n                }\r\n                else\r\n                {\r\n                    return 0;\r\n                }\r\n            });\r\n\r\n        const result: Recipe[] = [];\r\n\r\n        if(scoredRecipes.length>0)\r\n        {\r\n            for(let scoredRecipe of scoredRecipes)\r\n            {\r\n                if(scoredRecipes[0].score === scoredRecipe.score)\r\n                {\r\n                    result.push(scoredRecipe.recipe);\r\n                }\r\n                else\r\n                {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n}","import {Recipe} from '../model/Recipe';\r\n\r\nimport { RandomFilter } from './RandomFilter';\r\nimport { MinIngredientsFilter } from './MinIngredientsFilter';\r\nimport { MaxReuseFilter } from './MaxReuseFilter';\r\n\r\nexport const randomFilter = new RandomFilter();\r\n\r\nexport interface Filter {\r\n    id: string,\r\n    name: string,\r\n    filter: (explicitRecipes: Recipe[], selectedRecipes: Recipe[], remainingRecipes: Recipe[]) => Recipe[]\r\n}\r\n\r\nexport type Filters = {\r\n    all: () => Filter[],\r\n    get: (id: string) => Filter | undefined \r\n}\r\n\r\nfunction createFilters() {\r\n\r\n    const filters = [new MinIngredientsFilter(), new MaxReuseFilter(), randomFilter];\r\n    const filterMap = new Map<string,Filter>(filters.map(f => [f.id, f])); \r\n\r\n    return {\r\n        all: () => filters,\r\n        get: (id: string) => filterMap.get(id)\r\n    }\r\n}\r\n\r\nexport const filters: Filters = createFilters();\r\n","import {Filter, filters} from '../filters/Filter';\r\n\r\nexport enum Optimization {\r\n    MinimalNrIngrediants = 1,\r\n    MaximalResueOfIngredients\r\n  }\r\n\r\nexport class PlanSettings {\r\n\r\n    constructor() {\r\n        this.nrRecipes = 5;\r\n        this.optimization = filters.all()[0];\r\n     }\r\n\r\n    public clone() : PlanSettings {\r\n        return Object.create(this);\r\n    }\r\n\r\n    public nrRecipes: number\r\n    public optimization: Filter\r\n}\r\n","import React, {FunctionComponent} from 'react';\r\n\r\nimport {Accordion, Card} from 'react-bootstrap';\r\nimport {Form} from 'react-bootstrap';\r\n\r\nimport {PlanSettings} from '../model/PlanSettings';\r\nimport {filters} from '../filters/Filter';\r\n\r\ntype PlanSettingsPanelProps = {\r\n    planSettings: PlanSettings,\r\n    onUpdate: (planSettings: PlanSettings) => void\r\n}\r\n\r\nexport const PlanSettingsPanel: FunctionComponent<PlanSettingsPanelProps> = (props) => {\r\n\r\n    const [collapsed, setCollapsed] = React.useState(true);\r\n\r\n    const changeNrRecipes = (newNrRecipes: number) => {\r\n        let newSettings = props.planSettings.clone();\r\n        newSettings.nrRecipes = newNrRecipes;\r\n        props.onUpdate(newSettings);\r\n    }\r\n\r\n    const changeOptimization = (filterId: string) => {\r\n        let filter = filters.get(filterId);\r\n        if(filter)\r\n        {\r\n            let newSettings = props.planSettings.clone();\r\n            newSettings.optimization = filter;\r\n            props.onUpdate(newSettings);    \r\n        }\r\n    }\r\n\r\n    const filterList = filters.all().map(f => \r\n        <option value={f.id}>{f.name}</option>\r\n    )\r\n\r\n    return (\r\n        <Accordion defaultActiveKey=\"0\">\r\n        <Card>\r\n            <Accordion.Toggle as={Card.Header} variant=\"link\" eventKey=\"1\" onClick={() => setCollapsed(!collapsed)}>\r\n                Plan settings {collapsed ? \"[+]\" : \"[-]\"}\r\n            </Accordion.Toggle>\r\n            <Accordion.Collapse eventKey=\"1\">\r\n            <Card.Body>\r\n                <Form onSubmit={(e)=>e.preventDefault()}>\r\n                <Form.Group controlId=\"nrRecipes\">\r\n                    <Form.Label>Number of recipes:</Form.Label>\r\n                    <Form.Control as=\"select\" value={props.planSettings.nrRecipes} \r\n                                  onChange={(e)=>changeNrRecipes(parseInt(e.target.value))}>\r\n                    <option>3</option>\r\n                    <option>4</option>\r\n                    <option>5</option>\r\n                    <option>6</option>\r\n                    <option>7</option>\r\n                    </Form.Control>\r\n                </Form.Group>\r\n                <Form.Group controlId=\"optimization\">\r\n                    <Form.Label>Optimize by:</Form.Label>\r\n                    <Form.Control as=\"select\" value={props.planSettings.optimization.id} \r\n                                  onChange={(e)=>changeOptimization(e.target.value)}>\r\n                    {filterList}\r\n                    </Form.Control>\r\n                </Form.Group>\r\n                </Form>\r\n            </Card.Body>\r\n            </Accordion.Collapse>\r\n        </Card>\r\n        </Accordion>\r\n    );    \r\n}\r\n","import React, {FunctionComponent} from 'react';\r\n\r\nimport {Container, Table} from 'react-bootstrap';\r\n\r\nimport {Plan} from \"../model/Plan\";\r\nimport {PlanSettings} from \"../model/PlanSettings\";\r\n\r\ntype PlanVisualizerProps = {\r\n    plan: Plan,\r\n    planSettings: PlanSettings\r\n}\r\n\r\nexport const PlanVisualizer: FunctionComponent<PlanVisualizerProps> = ({plan}) => {\r\n\r\n    const allRecipes = plan.explicitRecipes.concat(plan.calculatedRecipes)\r\n\r\n    if(allRecipes.length === 0)\r\n    {\r\n        return (\r\n            <Container className=\"pt-2\">\r\n                No recipes are planned\r\n            </Container>\r\n        ) \r\n    }\r\n\r\n    const explicitRecipeHeaderList = plan.explicitRecipes.map(r => \r\n        <th>{r.getTitle()}</th>)\r\n\r\n    const calculatedRecipeHeaderList = plan.calculatedRecipes.map(r => \r\n        <th className=\"bg-light\">{r.getTitle()}</th>)\r\n\r\n    let ingredientMap = new Map<string, Record<number, string>>();\r\n\r\n    let idx = 0;\r\n    allRecipes.forEach(r => {\r\n        \r\n        r.getIngredients().forEach(i => {\r\n              let oneIngredientRecord = ingredientMap.get(i.getName());\r\n              if(!oneIngredientRecord)\r\n              {\r\n                oneIngredientRecord = {}\r\n                ingredientMap.set(i.getName(), oneIngredientRecord);\r\n              }\r\n              \r\n              oneIngredientRecord[idx] = \"\" + i.getAmount() + \" \" + i.getUnit();\r\n        });\r\n\r\n        idx++;\r\n    });\r\n\r\n    const ingredientLineList = Array.from(ingredientMap.keys()).sort().map(name => {\r\n        \r\n        const idxs: number[] = Array.from({length: allRecipes.length}, (x, i) => i);\r\n\r\n        const perRecipe = idxs.map(idx => {\r\n            var entry = ingredientMap.get(name);\r\n            if(entry && entry[idx])\r\n            {\r\n                return <td>{entry[idx]}</td>;\r\n            }\r\n            else\r\n            {\r\n                return <td>&nbsp;</td>;\r\n            }\r\n        });\r\n\r\n        return (<tr>\r\n                    <th>{name}</th>\r\n                    {perRecipe}\r\n                </tr>);\r\n    });\r\n\r\n\r\n    return (\r\n        <Container className=\"pt-2\">\r\n        <Table striped bordered size=\"sm\">\r\n            <thead>\r\n                <tr>\r\n                <th></th>\r\n                {explicitRecipeHeaderList}\r\n                {calculatedRecipeHeaderList}\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n            {ingredientLineList}\r\n            </tbody>\r\n        </Table>\r\n        </Container>\r\n    );\r\n\r\n}","import React, {FunctionComponent, ChangeEvent} from 'react';\r\nimport {Modal, Form, Button} from 'react-bootstrap';\r\n\r\nimport {RecipeJSON, IngredientJSON, Recipe, Ingredient} from '../model/Recipe';\r\n\r\ntype RecipeEditorProps = {\r\n    recipe?: Recipe,\r\n    onClose: () => void,\r\n    onSave: (recipe: Recipe) => void,\r\n    onDelete: (recipe: Recipe) => void\r\n}\r\n\r\nexport const RecipeEditor: FunctionComponent<RecipeEditorProps> = (props) => {\r\n\r\n    const [recipeJSON, setRecipeJSON] = React.useState<RecipeJSON>(\r\n                            props.recipe?props.recipe.toJSON():Object.create({}));\r\n    const [isTitleInvalid, setIsTitleInvalid] = React.useState(!props.recipe);\r\n    const [isIngredientsInvalid, setIsIngredientsInvalid] = React.useState(false);\r\n\r\n    const generateIngredientCSV = (ingredients: Ingredient[]) =>\r\n    {\r\n        return ingredients.map(i=>i.getName() + \";\" + i.getAmount() + \";\" + i.getUnit()).join(\"\\n\")\r\n    }\r\n\r\n    const [ingredientCSV, setIngredientCSV] = React.useState(props.recipe ? \r\n                            generateIngredientCSV(props.recipe.getIngredients()):\"\");\r\n\r\n    const setTitle = (e: ChangeEvent<HTMLInputElement>) => {\r\n        let newVal = e.currentTarget.value;\r\n        setIsTitleInvalid(!newVal || newVal.length === 0);\r\n        setRecipeJSON(r => ({...r, ...{title: newVal}}))\r\n    }\r\n\r\n    const setSummary = (e: ChangeEvent<HTMLInputElement>) => {\r\n        let newVal: string = e.currentTarget.value;\r\n        setRecipeJSON(r => ({...r, ...{summary: newVal}}))\r\n    }\r\n\r\n    const setSource = (e: ChangeEvent<HTMLInputElement>) => {\r\n        let newVal: string =  e.currentTarget.value;\r\n        setRecipeJSON(r => ({...r, ...{source: newVal}}))\r\n    }\r\n\r\n    const setMinutes = (e: ChangeEvent<HTMLInputElement>) => {\r\n        let newVal: number | undefined = Number.parseInt(e.currentTarget.value)\r\n        if(isNaN(newVal)) newVal = undefined\r\n        setRecipeJSON(r => ({...r, ...{readyInMinutes: newVal}}))\r\n    }\r\n\r\n    const updateIngredients = (e: ChangeEvent<HTMLInputElement>) => {\r\n\r\n        setIngredientCSV(e.currentTarget.value);\r\n        let lines: string[] = e.currentTarget.value.split(/\\r?\\n/);\r\n\r\n        if(lines.length === 0)\r\n        {\r\n            setRecipeJSON(r => ({...r, ...{ingredients: []}}))\r\n        }\r\n        else\r\n        {\r\n            let ingredients: IngredientJSON[] = [];\r\n            let invalid = false;\r\n\r\n            lines.forEach(line => {\r\n                if(line.length>0)\r\n                {\r\n                    let parts: string[] = line.split(';').map(s=>s.trim());\r\n                    if(parts.length!==3 ||\r\n                      parts[0].length===0 || parts[1].length===0 || parts[2].length===0 ||\r\n                      \"\"+Number.parseInt(parts[1])!==parts[1])\r\n                    {\r\n                        invalid = true;\r\n                    }\r\n                    else\r\n                    {\r\n                        ingredients.push({name: parts[0], amount: Number.parseInt(parts[1]), unit: parts[2]});\r\n                    }\r\n                }\r\n            });\r\n\r\n            if(invalid)\r\n            {\r\n                setIsIngredientsInvalid(true);\r\n            }\r\n            else\r\n            {\r\n                setIsIngredientsInvalid(false);\r\n                setRecipeJSON(r => ({...r, ...{ingredients: ingredients}}))\r\n            }\r\n        }\r\n    }\r\n\r\n    const saveRecipe = () =>\r\n    {\r\n        props.onSave(Recipe.fromJSON(recipeJSON))\r\n    }\r\n\r\n    const deleteRecipe = () =>\r\n    {\r\n        if(props.recipe)\r\n        {\r\n            props.onDelete(props.recipe)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Modal show={true} onHide={props.onClose}>\r\n        <Modal.Header closeButton>\r\n        <Modal.Title>Add new recipe</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n        <Form>\r\n        <Form.Group controlId=\"formTitle\">\r\n            <Form.Control type=\"title\" value={recipeJSON.title} placeholder=\"Title\" \r\n                                       isInvalid={isTitleInvalid} onChange={setTitle}/>\r\n            <Form.Control.Feedback type=\"invalid\">Required field!</Form.Control.Feedback>\r\n        </Form.Group>\r\n        <Form.Group controlId=\"formSummary\">\r\n            <Form.Control as=\"textarea\" value={recipeJSON.summary} onChange={setSummary} rows={4} placeholder=\"Summary\"/>\r\n        </Form.Group>\r\n        <Form.Group controlId=\"formSource\">\r\n            <Form.Control type=\"source\" value={recipeJSON.source} onChange={setSource} placeholder=\"Where to find the recipe\"/>\r\n        </Form.Group>\r\n        <Form.Group controlId=\"formMinutes\">\r\n            <Form.Control type=\"minutes\" value={recipeJSON.readyInMinutes} \r\n                                        onChange={setMinutes} placeholder=\"Number of minutes to cook\"/>\r\n        </Form.Group>\r\n        <Form.Group controlId=\"formIngredients\">\r\n            <Form.Control as=\"textarea\" value={ingredientCSV} rows={8} \r\n                                        onChange={updateIngredients} isInvalid={isIngredientsInvalid}\r\n                                        placeholder=\"Ingredients: <name>;<amount>;<unit>\" />\r\n            <Form.Control.Feedback type=\"invalid\">Format must be {\"<\"}name{\">\"};{\"<\"}amount{\">\"};{\"<\"}unit{\">\"} for every line!\"</Form.Control.Feedback>\r\n        </Form.Group>\r\n        </Form>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n        <Button type=\"button\" variant=\"secondary\" onClick={props.onClose}>Close</Button>\r\n        <Button type=\"button\" variant=\"primary\" onClick={saveRecipe} disabled={isTitleInvalid||isIngredientsInvalid}>Save recipe</Button>\r\n        {(() => {\r\n            if(props.recipe) {\r\n                return (<Button type=\"button\" variant=\"primary\" onClick={deleteRecipe}>Delete recipe</Button>)\r\n            }\r\n        })()}\r\n        </Modal.Footer>\r\n        </Modal>)\r\n}","import {Recipe} from './Recipe';\r\n\r\nexport class Plan {\r\n\r\n    constructor() {\r\n        this.explicitRecipes = [];\r\n        this.calculatedRecipes = [];\r\n    }\r\n\r\n    public clone() : Plan {\r\n        return Object.create(this);\r\n    }\r\n\r\n    public explicitRecipes: Recipe[];\r\n    public calculatedRecipes: Recipe[];\r\n}","import {Plan} from './model/Plan';\r\nimport {PlanSettings} from './model/PlanSettings';\r\nimport {Recipe} from './model/Recipe';\r\nimport {RecipeIndex} from './RecipeDB';\r\nimport {randomFilter} from './filters/Filter';\r\n\r\nexport function optimizePlan(recipeIndex: RecipeIndex, previousPlan: Plan, settings: PlanSettings) {\r\n\r\n    const nrRecipesToCalculate = Math.max(0, settings.nrRecipes - previousPlan.explicitRecipes.length);\r\n\r\n    const allRecipeIds = new Set(recipeIndex.all().map(r=>r.getId())); \r\n    const freeRecipeIds = new Set(allRecipeIds);\r\n    previousPlan.explicitRecipes.forEach(r=>freeRecipeIds.delete(r.getId()));\r\n\r\n    const calcultedRecipes: Recipe[] = [];\r\n\r\n    for(let i=0; i<nrRecipesToCalculate; i++)\r\n    {\r\n        let freeRecipes = recipeIndex.getAll(Array.from(freeRecipeIds));\r\n        let currentRecipes = settings.optimization.filter(previousPlan.explicitRecipes, calcultedRecipes, freeRecipes);\r\n\r\n        if(currentRecipes.length > 0)\r\n        {\r\n            var finalRecipe = randomFilter.filter(previousPlan.explicitRecipes, calcultedRecipes, currentRecipes)[0];\r\n\r\n            calcultedRecipes.push(finalRecipe);\r\n            freeRecipeIds.delete(finalRecipe.getId());\r\n        }\r\n    }\r\n\r\n    const newPlan = previousPlan.clone();\r\n    newPlan.calculatedRecipes = calcultedRecipes;\r\n\r\n    return newPlan;\r\n}","import React, {FunctionComponent} from 'react';\r\n\r\nimport {Navbar, Nav, NavDropdown} from 'react-bootstrap';\r\nimport {Container, Row, Col} from 'react-bootstrap';\r\nimport {Alert} from 'react-bootstrap';\r\n\r\nimport {Recipe, serializeRecipes, deserializeRecipes} from './model/Recipe';\r\nimport {RecipeSelector} from './components/RecipeSelector';\r\nimport {RecipeIndex} from './RecipeDB';\r\nimport {LoadFileDialog} from './components/LoadFileDialog';\r\nimport {PlanSettingsPanel} from './components/PlanSettings';\r\nimport {PlanSettings} from './model/PlanSettings';\r\nimport {PlanVisualizer} from './components/PlanVisualizer';\r\nimport {RecipeEditor} from './components/RecipeEditor';\r\nimport {Plan} from './model/Plan';\r\nimport {optimizePlan} from './Planner';\r\n\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n    \r\ntype MenuProps = {\r\n    onLoadFile: () => void,\r\n    onNewRecipe: () => void,\r\n    recipeFileUrl: string,\r\n}\r\n\r\nconst Menu: FunctionComponent<MenuProps> = ({onLoadFile, onNewRecipe, recipeFileUrl}) => {\r\n\r\n    return (\r\n        <Navbar bg=\"dark\" variant=\"dark\">\r\n        <Navbar.Brand href=\"#home\">Mealee</Navbar.Brand>\r\n        <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n        <Navbar.Collapse id=\"basic-navbar-nav\">\r\n            <Nav className=\"mr-auto\">\r\n            <NavDropdown title=\"Recipes\" id=\"collasible-nav-dropdown\">\r\n              <NavDropdown.Item href=\"#\" onClick={onLoadFile}>Load recipes...</NavDropdown.Item>\r\n              <NavDropdown.Item href={recipeFileUrl} download=\"\">Save recipes...</NavDropdown.Item>\r\n              <NavDropdown.Item href=\"\" onClick={onNewRecipe}>New recipe...</NavDropdown.Item>\r\n              {/* <NavDropdown.Divider /> */}\r\n            </NavDropdown>\r\n            </Nav>\r\n        </Navbar.Collapse>\r\n        </Navbar>\r\n    );    \r\n}\r\n\r\ntype AppState = {\r\n    recipeIndex: RecipeIndex,\r\n    planSettings: PlanSettings,\r\n    plan: Plan,\r\n    showLoadFileDialog: boolean,\r\n    showRecipeEditor: boolean,\r\n    recipeToEdit?: Recipe,\r\n    error: string | null\r\n}\r\n\r\nclass App extends React.Component<{}, AppState> {\r\n\r\n    constructor(props: {}) {\r\n        super(props);\r\n\r\n        let recipeIndex = new RecipeIndex();\r\n        let planSettings = new PlanSettings();\r\n\r\n        // Hard binding is needed if `loadFile` do not use arrow notation \r\n        // this.loadFile = this.loadFile.bind(this);\r\n        this.state = { \r\n            recipeIndex: recipeIndex,\r\n            planSettings: planSettings,\r\n            plan: optimizePlan(recipeIndex, new Plan(), planSettings),\r\n            showLoadFileDialog: false,\r\n            showRecipeEditor: false,\r\n            recipeToEdit: undefined,\r\n            error: null\r\n        };\r\n    }\r\n\r\n    addRecipes = (newRecipes: Recipe[]) => {\r\n        this.setState(st => {\r\n            newRecipes.forEach((recipe) => {\r\n                st.recipeIndex.add(recipe);\r\n            });\r\n\r\n            return {recipeIndex: st.recipeIndex,\r\n                    plan: optimizePlan(st.recipeIndex, st.plan, st.planSettings)};\r\n        });\r\n    }\r\n\r\n    saveRecipe = (recipe: Recipe) => {\r\n        this.addRecipes([recipe]);\r\n        this.closeRecipeEditor();\r\n    }\r\n\r\n    onFileLoaded = (ev: ProgressEvent<FileReader>) => {\r\n        let res = ev.target?.result;\r\n\r\n        if(typeof res == \"string\")\r\n        {\r\n            try\r\n            {\r\n                this.addRecipes(deserializeRecipes(res));\r\n            }\r\n            catch(e)\r\n            {\r\n                this.setState({error: e.message});\r\n            }\r\n            \r\n        }\r\n        this.closeLoadFileDialog();\r\n    }\r\n\r\n    loadFile = (file: File) => {\r\n        var reader = new FileReader();\r\n        reader.onload = (ev) => this.onFileLoaded(ev);\r\n        reader.readAsText(file);\r\n    } \r\n\r\n    generateRecipeFileURL = () : string => {\r\n        var data = new Blob([serializeRecipes(this.state.recipeIndex.all())], {type: 'application/recipes'}); \r\n        var url = window.URL.createObjectURL(data);\r\n        return url;\r\n    } \r\n\r\n    showLoadFileDialog = () => {\r\n        this.setState({showLoadFileDialog: true});\r\n    }\r\n\r\n    showRecipeEditor = () => {\r\n        this.setState({showRecipeEditor: true});\r\n    }\r\n\r\n    closeLoadFileDialog = () => {\r\n        this.setState({showLoadFileDialog: false});\r\n    }\r\n\r\n    closeRecipeEditor = () => {\r\n        this.setState({showRecipeEditor: false, recipeToEdit: undefined});\r\n    }\r\n\r\n    dismissError = () => {\r\n        this.setState({error: null});\r\n    }\r\n\r\n    updatePlanSettings = (ps: PlanSettings) => {\r\n        this.setState(st => {\r\n            return {planSettings: ps,\r\n                    plan: optimizePlan(st.recipeIndex, st.plan, ps)}\r\n        });\r\n    }\r\n\r\n    updateExplicitRecipes = (newExplicitRecipes: Recipe[]) => {\r\n        this.setState(st => {\r\n            let newPlan: Plan = Object.create(st.plan);\r\n            newPlan.explicitRecipes = newExplicitRecipes;\r\n            return {plan: optimizePlan(st.recipeIndex, newPlan, st.planSettings)};\r\n        });\r\n    }\r\n\r\n    editRecipe = (recipe: Recipe) => {\r\n        this.setState({showRecipeEditor: true,\r\n                       recipeToEdit: recipe});\r\n    }\r\n\r\n    deleteRecipe = (recipe: Recipe) => {\r\n        this.setState(st => {\r\n            st.recipeIndex.delete(recipe.getId());\r\n\r\n            return {recipeIndex: st.recipeIndex,\r\n                    plan: optimizePlan(st.recipeIndex, st.plan, st.planSettings),\r\n                    showRecipeEditor: false,\r\n                    recipeToEdit: undefined};\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Container fluid className=\"p-3\">\r\n\r\n                <Alert variant=\"danger\" onClose={this.dismissError} show={!!this.state.error} dismissible>\r\n                    {this.state.error}\r\n                </Alert>\r\n\r\n                {(() => {\r\n                    if(this.state.showLoadFileDialog) {\r\n                        return (<LoadFileDialog\r\n                                    onClose={this.closeLoadFileDialog}\r\n                                    title=\"Load recipes file\"\r\n                                    loadButtonTitle=\"Load recipes\"\r\n                                    onLoad={this.loadFile}/>)\r\n                    }\r\n                })()}\r\n\r\n                {(() => {\r\n                    if(this.state.showRecipeEditor) {\r\n                        return (<RecipeEditor\r\n                                    onClose={this.closeRecipeEditor}\r\n                                    onSave={this.saveRecipe}\r\n                                    onDelete={this.deleteRecipe}\r\n                                    recipe={this.state.recipeToEdit}/>)\r\n                    }\r\n                })()}\r\n\r\n                <Row>\r\n                    <Col> \r\n                        <Menu onLoadFile={this.showLoadFileDialog} \r\n                              onNewRecipe={this.showRecipeEditor}\r\n                              recipeFileUrl={this.generateRecipeFileURL()}/>\r\n                    </Col>\r\n                </Row>\r\n                <Row>\r\n                    <Col>\r\n                        <PlanSettingsPanel planSettings={this.state.planSettings} \r\n                                           onUpdate={this.updatePlanSettings}/>\r\n                    </Col>\r\n                </Row>\r\n                <Row className=\"pb-2\">\r\n                    <Col xs=\"3\">\r\n                        <RecipeSelector selectedRecipes={this.state.plan.explicitRecipes} \r\n                                        recipeIndex={this.state.recipeIndex}\r\n                                        maxNrSelected={this.state.planSettings.nrRecipes}\r\n                                        onUpdate={this.updateExplicitRecipes}\r\n                                        onEdit={this.editRecipe}/>\r\n                    </Col>\r\n                    <Col>\r\n                        <PlanVisualizer plan={this.state.plan} planSettings={this.state.planSettings}/>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    };\r\n};\r\n\r\nexport default App;","import './index.css';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App/>\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}